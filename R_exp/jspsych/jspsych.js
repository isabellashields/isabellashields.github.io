var jsPsychModule=function(e){"use strict";
/******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function t(e,t,i,r){function n(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):n(e.value).then(o,a)}l((r=r.apply(e,t||[])).next())})}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e){return[...new Set(e)]}function n(e){if(!e)return e;let t;if(Array.isArray(e)){t=[];for(const i of e)t.push(n(i));return t}if("object"==typeof e&&null!==e){t={};for(const i in e)e.hasOwnProperty(i)&&(t[i]=n(e[i]));return t}return e}function s(e,t){let i={};for(const r in e)e.hasOwnProperty(r)&&("object"==typeof e[r]&&t.hasOwnProperty(r)?i[r]=s(e[r],t[r]):i[r]=e[r]);for(const e in t)t.hasOwnProperty(e)&&(i.hasOwnProperty(e)&&"object"==typeof t[e]?i[e]=s(i[e],t[e]):i[e]=t[e]);return i}function o(e,t){const i=new Blob([e],{type:"text/plain"});let r="";r=void 0!==window.webkitURL?window.webkitURL.createObjectURL(i):window.URL.createObjectURL(i);const n=document.createElement("a");n.id="jspsych-download-as-text-link",n.style.display="none",n.download=t,n.href=r,n.click()}function a(e){const t="object"!=typeof e?JSON.parse(e):e;let i="",r="";const n=[];for(const e of t)for(const t in e){let e=t+"";e='"'+e.replace(/"/g,'""')+'",',n.includes(t)||(n.push(t),i+=e)}i=i.slice(0,-1),r+=i+"\r\n";for(const e of t){i="";for(const t of n){let r=void 0===e[t]?"":e[t];"object"==typeof r&&(r=JSON.stringify(r));i+='"'+(r+"").replace(/"/g,'""')+'",'}i=i.slice(0,-1),r+=i+"\r\n"}return r}function l(){const e=window.location.search.substr(1).split("&"),t={};for(let i=0;i<e.length;++i){const r=e[i].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}function c(e){const t=e.getInitSettings(),i=D(new F(e.getDisplayContainerElement,t.case_sensitive_responses,t.minimum_valid_rt)),r=D(new H),n=D(new W(t.use_webaudio,e.webaudio_context)),s=D(new U),o=D(new J(e.getDisplayContainerElement,r.setTimeout));return Object.assign({},i,r,n,s,o)}function u(e){function t(){return e&&e.maxLength>1?i():r()}function i(){for(var t,i=!1;!i;)(t=r()).length<=e.maxLength&&(i=!0);return t}function r(){return ye[n(ye.length)]}function n(e){const t=s?s():Math.random();return Math.floor(t*e)}let s=null;if(e&&e.seed&&(s=new ge(e.seed)),void 0===e)return t();"number"==typeof e&&(e={exactly:e}),e.exactly&&(e.min=e.exactly,e.max=e.exactly),"number"!=typeof e.wordsPerString&&(e.wordsPerString=1),"function"!=typeof e.formatter&&(e.formatter=e=>e),"string"!=typeof e.separator&&(e.separator=" ");for(var o=e.min+n(e.max+1-e.min),a=[],l="",c=0,u=0;u<o*e.wordsPerString;u++)c===e.wordsPerString-1?l+=e.formatter(t(),c):l+=e.formatter(t(),c)+e.separator,c++,(u+1)%e.wordsPerString===0&&(a.push(l),l="",c=0);return"string"==typeof e.join&&(a=a.join(e.join)),a}function h(e=Math.random().toString()){return Math.random=$(e),e}function d(e,t,i=!1){const r=Array.isArray(e),n=Array.isArray(t);if(r)if(n){if(e.length!=t.length)if(t.length<e.length){let i=[];for(let r=0;r<e.length;r++)i.push(t);t=i}else t=t.slice(0,e.length)}else{let i=[];for(let r=0;r<e.length;r++)i.push(t);t=i}else n?t=[t[0]]:(e=[e],t=[t]);let s=[];for(let i=0;i<e.length;i++)for(let r=0;r<t[i];r++)null==e[i]||"object"!=typeof e[i]?s.push(e[i]):s.push(Object.assign({},e[i]));let o=p(s);return i&&(o=E(o)),o}function p(e){Array.isArray(e);const t=e.slice(0);let i,r,n=t.length;for(;n;)r=Math.floor(Math.random()*n--),i=t[n],t[n]=t[r],t[r]=i;return t}function m(e,t){Array.isArray(e),void 0===t&&(t=function(e,t){return e===t});const i=p(e);for(let e=0;e<i.length-1;e++)if(t(i[e],i[e+1])){let r=Math.floor(Math.random()*(i.length-2))+1;for(;t(i[e+1],i[r])||t(i[e+1],i[r+1])||t(i[e+1],i[r-1])||t(i[e],i[r]);)r=Math.floor(Math.random()*(i.length-2))+1;const n=i[r];i[r]=i[e+1],i[e+1]=n}return i}function f(e,t=!1){const i=e.length;if(1==i)return p(e[0]);let r=[];for(let e=0;e<i;e++)r.push(e);t&&(r=p(r));const n=[];let s=null;for(let t=0;t<i;t++)s=null===s?e[t].length:Math.min(s,e[t].length),n.push(p(e[t]));const o=[];for(let e=0;e<s;e++)for(let t=0;t<r.length;t++)o.push(n[r[t]][e]);return o}function g(e,t){return Array.isArray(e),e.length,p(e).slice(0,t)}function y(e,t,i){Array.isArray(e);const r=[];if(void 0!==i){i.length,e.length;let t=0;for(const e of i)t+=e;for(const e of i)r.push(e/t)}else for(let t=0;t<e.length;t++)r.push(1/e.length);const n=[r[0]];for(let e=1;e<r.length;e++)n.push(r[e]+n[e-1]);const s=[];for(let i=0;i<t;i++){const t=Math.random();let i=0;for(;t>n[i];)i++;s.push(e[i])}return s}function w(e,t=1,i=!1){let r=[{}];for(const[t,i]of Object.entries(e)){const e=[];for(const n of i)for(const i of r)e.push(Object.assign(Object.assign({},i),{[t]:n}));r=e}return d(r,t,i)}function _(e=32){let t="";const i="0123456789abcdefghjklmnopqrstuvwxyz";for(let r=0;r<e;r++)t+=i[Math.floor(Math.random()*i.length)];return t}function v(e,t){if(t<e)throw new Error("Upper boundary must be less than or equal to lower boundary");return e+Math.floor(Math.random()*(t-e+1))}function b(e){return Math.random()<=e?1:0}function x(e,t){return P()*t+e}function T(e){return-Math.log(Math.random())/e}function k(e,t,i,r=!1){let n=x(e,t)+T(i);if(r)for(;n<=0;)n=x(e,t)+T(i);return n}function j(e){return _e(e)}function P(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}function E(e){const t={};for(const i of e)for(const e of Object.keys(i))void 0===t[e]&&(t[e]=[]),t[e].push(i[e]);return t}function O(){const e={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},t=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==i?"":i[1]},i=t(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map(function(r){e[r]=unescape(t(i,r))}),e.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==e.assignmentId,e.outsideTurk=!e.previewMode&&""===e.hitId&&""==e.assignmentId&&""==e.workerId,e}function A(e){const t=O(),i=t.assignmentId,r=t.turkSubmitTo;if(!i||!r)return;const n=document.createElement("form");n.method="POST",n.action=r+"/mturk/externalSubmit?assignmentId="+i;for(const t in e)if(e.hasOwnProperty(t)){const i=document.createElement("input");i.type="hidden",i.name=t,i.id=t,i.value=e[t],n.appendChild(i)}document.body.appendChild(n),n.submit()}function L(e){return new Promise(t=>setTimeout(t,e))}function M(e){const t=new Te(e),i={init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."};return Object.defineProperties(t,Object.fromEntries(Object.entries(i).map(([e,t])=>[e,{get(){throw new R(t)}}]))),t}"function"==typeof SuppressedError&&SuppressedError;var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};const S=e=>{const t=new Set;do{for(const i of Reflect.ownKeys(e))t.add([e,i])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t};var D=i((e,{include:t,exclude:i}={})=>{const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t?t.some(r):!i||!i.some(r)};for(const[t,i]of S(e.constructor.prototype)){if("constructor"===i||!r(i))continue;const n=Reflect.getOwnPropertyDescriptor(t,i);n&&"function"==typeof n.value&&(e[i]=e[i].bind(e))}return e}),C="7.3.4";class R extends Error{constructor(e="The global `jsPsych` variable is no longer available in jsPsych v7."){super(`${e} Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.`),this.name="MigrationError"}}window.jsPsych={get init(){throw new R("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new R},get randomization(){throw new R},get turk(){throw new R},get pluginAPI(){throw new R},get ALL_KEYS(){throw new R('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new R('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};var N,V=Object.freeze({__proto__:null,deepCopy:n,deepMerge:s,unique:r});class q{constructor(e=[]){this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){return this.sum()/this.count()}median(){if(0===this.values.length)return;const e=this.values.slice(0).sort(function(e,t){return e-t}),t=Math.floor(e.length/2);return e.length%2==0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const i of this.values)t+=Math.pow(i-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)void 0===e[t]?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const i of this.values)e(i)&&t.push(i);return new q(t)}}class z{constructor(e=[]){this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new z([this.trials[this.trials.length-1]])}first(e=1){if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new z:(e>this.trials.length&&(e=this.trials.length),new z(this.trials.slice(0,e)))}last(e=1){if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new z:(e>this.trials.length&&(e=this.trials.length),new z(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new z(n(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return 0!=this.trials.length&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;t=Array.isArray(e)?n(e):n([e]);const i=[];for(const e of this.trials){let r=!1;for(const i of t){let t=!0;for(const r of Object.keys(i))void 0!==e[r]&&e[r]===i[r]||(t=!1);if(t){r=!0;break}}r&&i.push(e)}return new z(i)}filterCustom(e){return new z(this.trials.filter(e))}filterColumns(e){return new z(this.trials.map(t=>Object.fromEntries(e.filter(e=>e in t).map(e=>[e,t[e]]))))}select(e){const t=[];for(const i of this.trials)void 0!==i[e]&&t.push(i[e]);return new q(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=n(this.trials);for(const i of t)for(const t of e)delete i[t];return new z(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const i of Object.keys(t))e.includes(i)||e.push(i);return e}csv(){return a(this.trials)}json(e=!1){return e?JSON.stringify(this.trials,null,"\t"):JSON.stringify(this.trials)}localSave(e,t){let i;if("json"===(e=e.toLowerCase()))i=this.json();else{if("csv"!==e)throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');i=this.csv()}o(i,t)}}class K{constructor(e){this.jsPsych=e,this.dataProperties={},this.reset()}reset(){this.allData=new z,this.interactionData=new z}get(){return this.allData}getInteractionData(){return this.interactionData}write(e){const t=this.jsPsych.getProgress(),i=this.jsPsych.getCurrentTrial(),r={trial_type:i.type.info.name,trial_index:t.current_trial_global,time_elapsed:this.jsPsych.getTotalTime(),internal_node_id:this.jsPsych.getCurrentTimelineNodeID()};this.allData.push(Object.assign(Object.assign(Object.assign(Object.assign({},e),i.data),r),this.dataProperties))}addProperties(e){this.allData.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.allData.addToLast(e)}getDataByTimelineNode(e){return this.allData.filterCustom(t=>t.internal_node_id.slice(0,e.length)===e)}getLastTrialData(){return this.allData.top()}getLastTimelineData(){const e=this.getLastTrialData().select("internal_node_id").values[0];if(void 0===e)return new z;{const t=e.substr(0,e.lastIndexOf("-"));return this.getDataByTimelineNode(t)}}displayData(e="json"){"json"!=(e=e.toLowerCase())&&"csv"!=e&&(e="json");const t="json"===e?this.allData.json(!0):this.allData.csv();this.jsPsych.getDisplayElement().innerHTML='<pre id="jspsych-data-display"></pre>',document.getElementById("jspsych-data-display").textContent=t}urlVariables(){return void 0===this.query_string&&(this.query_string=l()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}createInteractionListeners(){window.addEventListener("blur",()=>{const e={event:"blur",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)}),window.addEventListener("focus",()=>{const e={event:"focus",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)});const e=()=>{const e={event:document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)};document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e)}_customInsert(e){this.allData=new z(e)}_fullreset(){this.reset(),this.dataProperties={}}}class U{constructor(){this.hardwareConnected=!1,document.addEventListener("jspsych-activate",()=>{this.hardwareConnected=!0})}hardware(e){const t=new CustomEvent("jspsych",{detail:e});document.dispatchEvent(t)}}class F{constructor(e,t=!1,i=0){this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=i,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,D(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of Array.from(this.listeners))t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,i){return!(!t&&this.heldKeys.has(i))&&("ALL_KEYS"===e||"NO_KEYS"!==e&&e.includes(i))}getKeyboardResponse({callback_function:e,valid_responses:t="ALL_KEYS",rt_method:i="performance",persist:r,audio_context:n,audio_context_start_time:s,allow_held_key:o=!1,minimum_valid_rt:a=this.minimumValidRt}){"performance"!==i&&"audio"!==i&&(i="performance");const l="performance"===i?performance.now():1e3*s;this.registerRootListeners(),this.areResponsesCaseSensitive||"string"==typeof t||(t=t.map(e=>e.toLowerCase()));const c=s=>{const u=Math.round(("performance"==i?performance.now():1e3*n.currentTime)-l);if(u<a)return;const h=this.toLowerCaseIfInsensitive(s.key);this.isResponseValid(t,o,h)&&(s.preventDefault(),r||this.cancelKeyboardResponse(c),e({key:h,rt:u}))};return this.listeners.add(c),c}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(!("string"!=typeof e&&null!==e||"string"!=typeof t&&null!==t))return"string"==typeof e&&"string"==typeof t?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():null===e&&null===t}}e.ParameterType=void 0,(N=e.ParameterType||(e.ParameterType={}))[N.BOOL=0]="BOOL",N[N.STRING=1]="STRING",N[N.INT=2]="INT",N[N.FLOAT=3]="FLOAT",N[N.FUNCTION=4]="FUNCTION",N[N.KEY=5]="KEY",N[N.KEYS=6]="KEYS",N[N.SELECT=7]="SELECT",N[N.HTML_STRING=8]="HTML_STRING",N[N.IMAGE=9]="IMAGE",N[N.AUDIO=10]="AUDIO",N[N.VIDEO=11]="VIDEO",N[N.OBJECT=12]="OBJECT",N[N.COMPLEX=13]="COMPLEX",N[N.TIMELINE=14]="TIMELINE";const Y={data:{type:e.ParameterType.OBJECT,pretty_name:"Data",default:{}},on_start:{type:e.ParameterType.FUNCTION,pretty_name:"On start",default:function(){}},on_finish:{type:e.ParameterType.FUNCTION,pretty_name:"On finish",default:function(){}},on_load:{type:e.ParameterType.FUNCTION,pretty_name:"On load",default:function(){}},post_trial_gap:{type:e.ParameterType.INT,pretty_name:"Post trial gap",default:null},css_classes:{type:e.ParameterType.STRING,pretty_name:"Custom CSS classes",default:null},simulation_options:{type:e.ParameterType.COMPLEX,default:null}},B=[e.ParameterType.AUDIO,e.ParameterType.IMAGE,e.ParameterType.VIDEO];class W{constructor(e,t){this.useWebaudio=e,this.webaudioContext=t,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}initAudio(){this.context=this.useWebaudio?this.webaudioContext:null}audioContext(){return null!==this.context&&"running"!==this.context.state&&this.context.resume(),this.context}getAudioBuffer(e){return new Promise((t,i)=>{void 0===this.audio_buffers[e]||"tmp"==this.audio_buffers[e]?this.preloadAudio([e],()=>{t(this.audio_buffers[e])},()=>{},e=>{i(e.error)}):t(this.audio_buffers[e])})}preloadAudio(e,t=()=>{},i=()=>{},n=()=>{}){e=r(e.flat());let s=0;if(0==e.length)return void t();const o=r=>{const o=new XMLHttpRequest;o.open("GET",r,!0),o.responseType="arraybuffer",o.onload=()=>{this.context.decodeAudioData(o.response,n=>{this.audio_buffers[r]=n,s++,i(r),s==e.length&&t()},e=>{n({source:r,error:e})})},o.onerror=e=>{let t=e;404==o.status&&(t="404"),n({source:r,error:t})},o.onloadend=()=>{404==o.status&&n({source:r,error:"404"})},o.send(),this.preload_requests.push(o)},a=r=>{const o=new Audio,a=()=>{this.audio_buffers[r]=o,s++,i(r),s==e.length&&t(),o.removeEventListener("canplaythrough",a)};o.addEventListener("canplaythrough",a),o.addEventListener("error",function e(t){n({source:o.src,error:t}),o.removeEventListener("error",e)}),o.addEventListener("abort",function e(t){n({source:o.src,error:t}),o.removeEventListener("abort",e)}),o.src=r,this.preload_requests.push(o)};for(const r of e)void 0!==this.audio_buffers[r]?(s++,i(r),s==e.length&&t()):(this.audio_buffers[r]="tmp",null!==this.audioContext()?o(r):a(r))}preloadImages(e,t=()=>{},i=()=>{},n=()=>{}){e=r(e.flat());var s=0;if(0!==e.length)for(let r=0;r<e.length;r++){const o=new Image,a=e[r];o.onload=()=>{s++,i(a),s===e.length&&t()},o.onerror=e=>{n({source:a,error:e})},o.src=a,this.img_cache[a]=o,this.preload_requests.push(o)}else t()}preloadVideo(e,t=()=>{},i=()=>{},n=()=>{}){e=r(e.flat());let s=0;if(0!==e.length)for(const r of e){const o=this.video_buffers,a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType="blob",a.onload=()=>{if(200===a.status||0===a.status){const n=a.response;o[r]=URL.createObjectURL(n),s++,i(r),s===e.length&&t()}},a.onerror=e=>{let t=e;404==a.status&&(t="404"),n({source:r,error:t})},a.onloadend=()=>{404==a.status&&n({source:r,error:"404"})},a.send(),this.preload_requests.push(a)}else t()}getAutoPreloadList(t){const i=Object.fromEntries(B.map(e=>[e,new Set])),r=(e,t)=>{var n,s,o,a;if(void 0!==e.timeline)for(const i of e.timeline)r(i,null!==(n=e.type)&&void 0!==n?n:t);else if(null===(o=null!==(s=e.type)&&void 0!==s?s:t)||void 0===o?void 0:o.info){const{name:r,parameters:n}=(null!==(a=e.type)&&void 0!==a?a:t).info;this.preloadMap.has(r)||this.preloadMap.set(r,Object.fromEntries(Object.entries(n).filter(([e,{type:t,preload:i}])=>B.includes(t)&&(null==i||i)).map(([e,{type:t}])=>[e,t])));for(const[t,n]of Object.entries(this.preloadMap.get(r))){const r=e[t],s=i[n];if("string"==typeof r)s.add(r);else if(Array.isArray(r))for(const e of r.flat())"string"==typeof e&&s.add(e)}}};return r({timeline:t}),{images:[...i[e.ParameterType.IMAGE]],audio:[...i[e.ParameterType.AUDIO]],video:[...i[e.ParameterType.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const i=new MediaRecorder(e,t);this.camera_recorder=i}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class J{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e,t=0){t>0?this.setJsPsychTimeout(()=>{this.keyDown(e),this.keyUp(e)},t):(this.keyDown(e),this.keyUp(e))}clickTarget(e,t=0){t>0?this.setJsPsychTimeout(()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t,i=0){i>0?this.setJsPsychTimeout(()=>{e.value=t},i):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let i;if("NO_KEYS"==e)i=null;else if("ALL_KEYS"==e)i=t[Math.floor(Math.random()*t.length)];else{const t=e.flat();i=t[Math.floor(Math.random()*t.length)]}return i}mergeSimulationData(e,t){return Object.assign(Object.assign({},e),null==t?void 0:t.data)}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&"NO_KEYS"==e.choices&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const i=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<i&&(t.rt=null,t.response=null)}}}class H{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const i=window.setTimeout(e,t);return this.timeout_handlers.push(i),i}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}var G={exports:{}};G.exports,
// Copyright (C) 2010 by Johannes BaagÃ¸e <baagoe@baagoe.org>
// The above copyright notice and this permission notice shall be included in
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
function(e,t,i){function r(e){var t=this,i=o();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=i(" "),t.s1=i(" "),t.s2=i(" "),t.s0-=i(e),t.s0<0&&(t.s0+=1),t.s1-=i(e),t.s1<0&&(t.s1+=1),t.s2-=i(e),t.s2<0&&(t.s2+=1),i=null}function n(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var i=new r(e),s=t&&t.state,o=i.next;return o.int32=function(){return 4294967296*i.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,s&&("object"==typeof s&&n(s,i),o.state=function(){return n(i,{})}),o}function o(){var e=4022871197;return function(t){t=String(t);for(var i=0;i<t.length;i++){var r=.02519603282416938*(e+=t.charCodeAt(i));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}t&&t.exports?t.exports=s:i&&i.amd?i(function(){return s}):this.alea=s}(0,G,!1);var X=G.exports,$=i(X),Q={exports:{}};Q.exports,function(e){!function(e,t,i){function r(e){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:i+=e;for(var r=0;r<i.length+64;r++)t.x^=0|i.charCodeAt(r),t.next()}function n(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var i=new r(e),s=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,s&&("object"==typeof s&&n(s,i),o.state=function(){return n(i,{})}),o}t&&t.exports?t.exports=s:i&&i.amd?i(function(){return s}):this.xor128=s}(0,e,!1)}(Q);var Z=Q.exports,ee={exports:{}};ee.exports,function(e){!function(e,t,i){function r(e){var t=this,i="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:i+=e;for(var r=0;r<i.length+64;r++)t.x^=0|i.charCodeAt(r),r==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function n(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var i=new r(e),s=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,s&&("object"==typeof s&&n(s,i),o.state=function(){return n(i,{})}),o}t&&t.exports?t.exports=s:i&&i.amd?i(function(){return s}):this.xorwow=s}(0,e,!1)}(ee);var te=ee.exports,ie={exports:{}};ie.exports,function(e){!function(e,t,i){function r(e){function t(e,t){var i,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,i=0;i<t.length;++i)r[7&i]=r[7&i]<<15^t.charCodeAt(i)+r[i+1&7]<<13;for(;r.length<8;)r.push(0);for(i=0;i<8&&0===r[i];++i);for(8==i?r[7]=-1:r[i],e.x=r,e.i=0,i=256;i>0;--i)e.next()}var i=this;i.next=function(){var e,t,r=i.x,n=i.i;return e=r[n],t=(e^=e>>>7)^e<<24,t^=(e=r[n+1&7])^e>>>10,t^=(e=r[n+3&7])^e>>>3,t^=(e=r[n+4&7])^e<<7,e=r[n+7&7],t^=(e^=e<<13)^e<<9,r[n]=t,i.i=n+1&7,t},t(i,e)}function n(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var i=new r(e),s=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,s&&(s.x&&n(s,i),o.state=function(){return n(i,{})}),o}t&&t.exports?t.exports=s:i&&i.amd?i(function(){return s}):this.xorshift7=s}(0,e,!1)}(ie);var re=ie.exports,ne={exports:{}};ne.exports,function(e){!function(e,t,i){function r(e){function t(e,t){var i,r,n,s,o,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),n=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,n=0==(i=a[127&s]^=r+o)?n+1:0);for(n>=128&&(a[127&(t&&t.length||0)]=-1),n=127,s=512;s>0;--s)r=a[n+34&127],i=a[n=n+1&127],r^=r<<13,i^=i<<17,r^=r>>>15,i^=i>>>12,a[n]=r^i;e.w=o,e.X=a,e.i=n}var i=this;i.next=function(){var e,t,r=i.w,n=i.X,s=i.i;return i.w=r=r+1640531527|0,t=n[s+34&127],e=n[s=s+1&127],t^=t<<13,e^=e<<17,t^=t>>>15,e^=e>>>12,t=n[s]=t^e,i.i=s,t+(r^r>>>16)|0},t(i,e)}function n(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var i=new r(e),s=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,s&&(s.X&&n(s,i),o.state=function(){return n(i,{})}),o}t&&t.exports?t.exports=s:i&&i.amd?i(function(){return s}):this.xor4096=s}(0,e,!1)}(ne);var se=ne.exports,oe={exports:{}};oe.exports,function(e){!function(e,t,i){function r(e){var t=this,i="";t.next=function(){var e=t.b,i=t.c,r=t.d,n=t.a;return e=e<<25^e>>>7^i,i=i-r|0,r=r<<24^r>>>8^n,n=n-e|0,t.b=e=e<<20^e>>>12^i,t.c=i=i-r|0,t.d=r<<16^i>>>16^n,t.a=n-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):i+=e;for(var r=0;r<i.length+20;r++)t.b^=0|i.charCodeAt(r),t.next()}function n(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var i=new r(e),s=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,s&&("object"==typeof s&&n(s,i),o.state=function(){return n(i,{})}),o}t&&t.exports?t.exports=s:i&&i.amd?i(function(){return s}):this.tychei=s}(0,e,!1)}(oe);var ae=oe.exports,le={exports:{}};
/*
    Copyright 2019 David Bau.

    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
    CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
    SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

    */
!function(e){!function(t,i,r){function n(e,t,n){var h=[],m=l(a((t=1==t?{entropy:!0}:t||{}).entropy?[e,u(i)]:null==e?c():e,3),h),_=new s(h),v=function(){for(var e=_.g(p),t=g,i=0;e<y;)e=(e+i)*d,t*=d,i=_.g(1);for(;e>=w;)e/=2,t/=2,i>>>=1;return(e+i)/t};return v.int32=function(){return 0|_.g(4)},v.quick=function(){return _.g(4)/4294967296},v.double=v,l(u(_.S),i),(t.pass||n||function(e,t,i,n){return n&&(n.S&&o(n,_),e.state=function(){return o(_,{})}),i?(r[f]=e,t):e})(v,m,"global"in t?t.global:this==r,t.state)}function s(e){var t,i=e.length,r=this,n=0,s=r.i=r.j=0,o=r.S=[];for(i||(e=[i++]);n<d;)o[n]=n++;for(n=0;n<d;n++)o[n]=o[s=_&s+e[n%i]+(t=o[n])],o[s]=t;(r.g=function(e){for(var t,i=0,n=r.i,s=r.j,o=r.S;e--;)t=o[n=_&n+1],i=i*d+o[_&(o[n]=o[s=_&s+t])+(o[s]=t)];return r.i=n,r.j=s,i})(d)}function o(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function a(e,t){var i,r=[],n=typeof e;if(t&&"object"==n)for(i in e)try{r.push(a(e[i],t-1))}catch(e){}return r.length?r:"string"==n?e:e+"\0"}function l(e,t){for(var i,r=e+"",n=0;n<r.length;)t[_&n]=_&(i^=19*t[_&n])+r.charCodeAt(n++);return u(t)}function c(){try{var e;return h&&(e=h.randomBytes)?e=e(d):(e=new Uint8Array(d),(t.crypto||t.msCrypto).getRandomValues(e)),u(e)}catch(e){var r=t.navigator,n=r&&r.plugins;return[+new Date,t,n,t.screen,u(i)]}}function u(e){return String.fromCharCode.apply(0,e)}var h,d=256,p=6,m=52,f="random",g=r.pow(d,p),y=r.pow(2,m),w=2*y,_=d-1;if(l(r.random(),i),e.exports){e.exports=n;try{h=require("crypto")}catch(e){}}else r["seed"+f]=n}("undefined"!=typeof self?self:I,[],Math)}(le);var ce=X,ue=Z,he=te,de=re,pe=se,me=ae,fe=le.exports;fe.alea=ce,fe.xor128=ue,fe.xorwow=he,fe.xorshift7=de,fe.xor4096=pe,fe.tychei=me;var ge=fe,ye=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"],we=u;u.wordList=ye;var _e=i(we),ve=Object.freeze({__proto__:null,factorial:w,randomID:_,randomInt:v,randomWords:j,repeat:d,sampleBernoulli:b,sampleExGaussian:k,sampleExponential:T,sampleNormal:x,sampleWithReplacement:y,sampleWithoutReplacement:g,setSeed:h,shuffle:p,shuffleAlternateGroups:f,shuffleNoRepeats:m}),be=Object.freeze({__proto__:null,submitToTurk:A,turkInfo:O});class xe{constructor(e,t,i,r){if(this.jsPsych=e,this.progress={current_location:-1,current_variable_set:0,current_repetition:0,current_iteration:0,done:!1},this.parent_node=i,this.relative_id=void 0===i?0:r,void 0!==t.timeline){this.timeline_parameters={timeline:[],loop_function:t.loop_function,conditional_function:t.conditional_function,sample:t.sample,randomize_order:void 0!==t.randomize_order&&t.randomize_order,repetitions:void 0===t.repetitions?1:t.repetitions,timeline_variables:void 0===t.timeline_variables?[{}]:t.timeline_variables,on_timeline_finish:t.on_timeline_finish,on_timeline_start:t.on_timeline_start},this.setTimelineVariablesOrder();var n=Object.assign({},t);delete n.timeline,delete n.conditional_function,delete n.loop_function,delete n.randomize_order,delete n.repetitions,delete n.timeline_variables,delete n.sample,delete n.on_timeline_start,delete n.on_timeline_finish,this.node_trial_data=n;for(var s=0;s<t.timeline.length;s++){var o=Object.assign({},n,t.timeline[s]);if("object"==typeof n.data&&"object"==typeof t.timeline[s].data){var a=Object.assign({},n.data,t.timeline[s].data);o.data=a}this.timeline_parameters.timeline.push(new xe(this.jsPsych,o,this,s))}}else t.type,this.trial_parameters=Object.assign({},t)}trial(){return void 0===this.timeline_parameters?n(this.trial_parameters):this.progress.current_location>=this.timeline_parameters.timeline.length?null:this.timeline_parameters.timeline[this.progress.current_location].trial()}markCurrentTrialComplete(){void 0===this.timeline_parameters?this.progress.done=!0:this.timeline_parameters.timeline[this.progress.current_location].markCurrentTrialComplete()}nextRepetiton(){this.setTimelineVariablesOrder(),this.progress.current_location=-1,this.progress.current_variable_set=0,this.progress.current_repetition++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}setTimelineVariablesOrder(){const e=this.timeline_parameters;if(void 0!==e&&void 0!==e.timeline_variables){for(var t=[],i=0;i<e.timeline_variables.length;i++)t.push(i);void 0!==e.sample&&("custom"==e.sample.type?t=e.sample.fn(t):"with-replacement"==e.sample.type?t=y(t,e.sample.size,e.sample.weights):"without-replacement"==e.sample.type?t=g(t,e.sample.size):"fixed-repetitions"==e.sample.type?t=d(t,e.sample.size,!1):"alternate-groups"==e.sample.type&&(t=f(e.sample.groups,e.sample.randomize_group_order))),e.randomize_order&&(t=p(t)),this.progress.order=t}}nextSet(){this.progress.current_location=-1,this.progress.current_variable_set++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}advance(){const e=this.progress,t=this.timeline_parameters,i=this.jsPsych.internal;if(e.done)return!0;if(-1==e.current_location){if(void 0!==t){if(void 0!==t.conditional_function&&0==e.current_repetition&&0==e.current_variable_set){i.call_immediate=!0;var r=t.conditional_function();if(i.call_immediate=!1,0==r)return e.done=!0,!0}void 0!==t.on_timeline_start&&0==e.current_variable_set&&t.on_timeline_start()}return e.current_location=0,this.advance()}if(void 0!==t){for(var n=!1;e.current_location<t.timeline.length&&0==n;){if(!t.timeline[e.current_location].advance())return n=!0,!1;e.current_location++}return e.current_variable_set<e.order.length-1?(this.nextSet(),this.advance()):e.current_repetition<t.repetitions-1?(this.nextRepetiton(),void 0!==t.on_timeline_finish&&t.on_timeline_finish(),this.advance()):(void 0!==t.on_timeline_finish&&t.on_timeline_finish(),void 0!==t.loop_function?(i.call_immediate=!0,t.loop_function(this.generatedData())?(this.reset(),i.call_immediate=!1,this.parent_node.advance()):(e.done=!0,i.call_immediate=!1,!0)):(e.done=!0,!0))}}isComplete(){return this.progress.done}getTimelineVariableValue(e){if(void 0!==this.timeline_parameters)return this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]][e]}findTimelineVariable(e){var t=this.getTimelineVariableValue(e);return void 0===t?void 0!==this.parent_node?this.parent_node.findTimelineVariable(e):void 0:t}timelineVariable(e){if(void 0===this.timeline_parameters){const t=this.findTimelineVariable(e);return t}{var t=Math.max(0,this.progress.current_location);t==this.timeline_parameters.timeline.length&&(t-=1);const i=this.timeline_parameters.timeline[t].timelineVariable(e);return i}}allTimelineVariables(){for(var e=this.allTimelineVariablesNames(),t={},i=0;i<e.length;i++)t[e[i]]=this.timelineVariable(e[i]);return t}allTimelineVariablesNames(e=[]){if(void 0!==this.timeline_parameters){e=e.concat(Object.keys(this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]]));var t=Math.max(0,this.progress.current_location);return t==this.timeline_parameters.timeline.length&&(t-=1),this.timeline_parameters.timeline[t].allTimelineVariablesNames(e)}if(void 0===this.timeline_parameters)return e}length(){var e=0;if(void 0===this.timeline_parameters)return 1;for(var t=0;t<this.timeline_parameters.timeline.length;t++)e+=this.timeline_parameters.timeline[t].length();return e}percentComplete(){for(var e=this.length(),t=0,i=0;i<this.timeline_parameters.timeline.length;i++)this.timeline_parameters.timeline[i].isComplete()&&(t+=this.timeline_parameters.timeline[i].length());return t/e*100}reset(){if(this.progress.current_location=-1,this.progress.current_repetition=0,this.progress.current_variable_set=0,this.progress.current_iteration++,this.progress.done=!1,this.setTimelineVariablesOrder(),void 0!==this.timeline_parameters)for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}end(){this.progress.done=!0}endActiveNode(){void 0===this.timeline_parameters?(this.end(),this.parent_node.end()):this.timeline_parameters.timeline[this.progress.current_location].endActiveNode()}ID(){var e="";return void 0===this.parent_node?"0."+this.progress.current_iteration:(e+=this.parent_node.ID()+"-",e+=this.relative_id+"."+this.progress.current_iteration)}activeID(){return void 0===this.timeline_parameters?this.ID():this.timeline_parameters.timeline[this.progress.current_location].activeID()}generatedData(){return this.jsPsych.data.getDataByTimelineNode(this.ID())}trialsOfType(e){if(void 0===this.timeline_parameters)return this.trial_parameters.type==e?this.trial_parameters:[];for(var t=[],i=0;i<this.timeline_parameters.timeline.length;i++){var r=this.timeline_parameters.timeline[i].trialsOfType(e);t=t.concat(r)}return t}insert(e){void 0===this.timeline_parameters||this.timeline_parameters.timeline.push(new xe(this.jsPsych,Object.assign(Object.assign({},this.node_trial_data),e),this,this.timeline_parameters.timeline.length))}}class Te{version(){return C}constructor(e){this.extensions={},this.turk=be,this.randomization=ve,this.utils=V,this.opts={},this.global_trial_index=0,this.current_trial={},this.current_trial_finished=!1,this.paused=!1,this.waiting=!1,this.file_protocol=!1,this.simulation_mode=null,this.webaudio_context=null,this.internal={call_immediate:!1},this.progress_bar_amount=0,e=Object.assign({display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,exclusions:{},show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[]},e),this.opts=e,D(this),this.webaudio_context="undefined"!=typeof window&&void 0!==window.AudioContext?new AudioContext:null,"file:"!=window.location.protocol||!1!==e.override_safe_mode&&void 0!==e.override_safe_mode||(e.use_webaudio=!1,this.file_protocol=!0),this.data=new K(this),this.pluginAPI=c(this);for(const t of e.extensions)this.extensions[t.type.info.name]=new t.type(this);this.pluginAPI.initAudio()}run(e){return t(this,void 0,void 0,function*(){e.length,this.timelineDescription=e,this.timeline=new xe(this,{timeline:e}),yield this.prepareDom(),yield this.checkExclusions(this.opts.exclusions),yield this.loadExtensions(this.opts.extensions),document.documentElement.setAttribute("jspsych","present"),this.startExperiment(),yield this.finished})}simulate(e,i="data-only",r={}){return t(this,void 0,void 0,function*(){this.simulation_mode=i,this.simulation_options=r,yield this.run(e)})}getProgress(){return{total_trials:void 0===this.timeline?void 0:this.timeline.length(),current_trial_global:this.global_trial_index,percent_complete:void 0===this.timeline?0:this.timeline.percentComplete()}}getStartTime(){return this.exp_start_time}getTotalTime(){return void 0===this.exp_start_time?0:(new Date).getTime()-this.exp_start_time.getTime()}getDisplayElement(){return this.DOM_target}getDisplayContainerElement(){return this.DOM_container}finishTrial(e={}){var t;if(this.current_trial_finished)return;this.current_trial_finished=!0,void 0!==this.current_trial.css_classes&&Array.isArray(this.current_trial.css_classes)&&this.DOM_target.classList.remove(...this.current_trial.css_classes),this.data.write(e);const i=this.data.getLastTrialData().values()[0],r=this.current_trial;if("object"==typeof r.save_trial_parameters)for(const e of Object.keys(r.save_trial_parameters)){const t=r.save_trial_parameters[e];!0===t&&(void 0===r[e]||("function"==typeof r[e]?i[e]=r[e].toString():i[e]=r[e])),!1===t&&"internal_node_id"!==e&&"trial_index"!==e&&delete i[e]}const n=(null!==(t=r.extensions)&&void 0!==t?t:[]).map(e=>this.extensions[e.type.info.name].on_finish(e.params)),s=()=>{this.internal.call_immediate=!0,"function"==typeof r.on_finish&&r.on_finish(i),this.opts.on_trial_finish(i),this.opts.on_data_update(i),this.internal.call_immediate=!1,"data-only"===this.simulation_mode?this.nextTrial():null===typeof r.post_trial_gap||void 0===r.post_trial_gap?this.opts.default_iti>0?setTimeout(this.nextTrial,this.opts.default_iti):this.nextTrial():r.post_trial_gap>0?setTimeout(this.nextTrial,r.post_trial_gap):this.nextTrial()};if(n.some(e=>"function"==typeof e.then))Promise.all(n.map(e=>Promise.resolve(e).then(e=>{Object.assign(i,e)}))).then(s);else{for(const e of n)Object.assign(i,e);s()}}endExperiment(e="",t={}){this.timeline.end_message=e,this.timeline.end(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}endCurrentTimeline(){this.timeline.endActiveNode()}getCurrentTrial(){return this.current_trial}getInitSettings(){return this.opts}getCurrentTimelineNodeID(){return this.timeline.activeID()}timelineVariable(e,t=!1){return this.internal.call_immediate||!0===t?this.timeline.timelineVariable(e):{timelineVariablePlaceholder:!0,timelineVariableFunction:()=>this.timeline.timelineVariable(e)}}getAllTimelineVariables(){return this.timeline.allTimelineVariables()}addNodeToEndOfTimeline(e,t){this.timeline.insert(e)}pauseExperiment(){this.paused=!0}resumeExperiment(){this.paused=!1,this.waiting&&(this.waiting=!1,this.nextTrial())}loadFail(e){e=e||"<p>The experiment failed to load.</p>",this.DOM_target.innerHTML=e}getSafeModeStatus(){return this.file_protocol}getTimeline(){return this.timelineDescription}prepareDom(){return t(this,void 0,void 0,function*(){"complete"!==document.readyState&&(yield new Promise(e=>{window.addEventListener("load",e)}));const e=this.opts;if(void 0===e.display_element){null===document.querySelector("body")&&document.documentElement.appendChild(document.createElement("body")),document.querySelector("html").style.height="100%",document.querySelector("body").style.margin="0px",document.querySelector("body").style.height="100%",document.querySelector("body").style.width="100%",e.display_element=document.querySelector("body")}else{const t=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);null===t||(e.display_element=t)}e.display_element.innerHTML='<div class="jspsych-content-wrapper"><div id="jspsych-content"></div></div>',this.DOM_container=e.display_element,this.DOM_target=document.querySelector("#jspsych-content"),null!==e.experiment_width&&(this.DOM_target.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,-1===e.display_element.className.indexOf("jspsych-display-element")&&(e.display_element.className+=" jspsych-display-element"),this.DOM_target.className+="jspsych-content",this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close)})}loadExtensions(e){return t(this,void 0,void 0,function*(){try{yield Promise.all(e.map(e=>this.extensions[e.type.info.name].initialize(e.params||{})))}catch(e){throw new Error(e)}})}startExperiment(){this.finished=new Promise(e=>{this.resolveFinishedPromise=e}),!0===this.opts.show_progress_bar&&this.drawProgressBar(this.opts.message_progress_bar),this.exp_start_time=new Date,this.timeline.advance(),this.doTrial(this.timeline.trial())}finishExperiment(){const e=this.opts.on_finish(this.data.get()),t=()=>{void 0!==this.timeline.end_message&&(this.DOM_target.innerHTML=this.timeline.end_message),this.resolveFinishedPromise()};e?Promise.resolve(e).then(t):t()}nextTrial(){if(this.paused)return void(this.waiting=!0);this.global_trial_index++,this.timeline.markCurrentTrialComplete();const e=this.timeline.advance();!0===this.opts.show_progress_bar&&!0===this.opts.auto_update_progress_bar&&this.updateProgressBar(),e?this.finishExperiment():this.doTrial(this.timeline.trial())}doTrial(e){if(this.current_trial=e,this.current_trial_finished=!1,this.evaluateTimelineVariables(e),"string"==typeof e.type)throw new R("A string was provided as the trial's `type` parameter. Since jsPsych v7, the `type` parameter needs to be a plugin object.");if(e.type=Object.assign(Object.assign({},D(new e.type(this))),{info:e.type.info}),this.evaluateFunctionParameters(e),this.setDefaultValues(e),this.internal.call_immediate=!0,this.opts.on_trial_start(e),
"function"==typeof e.on_start&&e.on_start(e),Array.isArray(e.extensions))for(const t of e.extensions)this.extensions[t.type.info.name].on_start(t.params);this.DOM_container.focus(),this.DOM_target.scrollTop=0,void 0!==e.css_classes&&(Array.isArray(e.css_classes)||"string"!=typeof e.css_classes||(e.css_classes=[e.css_classes]),Array.isArray(e.css_classes)&&this.DOM_target.classList.add(...e.css_classes));const t=()=>{if("function"==typeof e.on_load&&e.on_load(),Array.isArray(e.extensions))for(const t of e.extensions)this.extensions[t.type.info.name].on_load(t.params)};let i,r,n;this.simulation_mode||(i=e.type.trial(this.DOM_target,e,t)),this.simulation_mode&&(e.type.simulate?(e.simulation_options||(r=this.simulation_options.default),e.simulation_options&&(r="string"==typeof e.simulation_options?this.simulation_options[e.simulation_options]?this.simulation_options[e.simulation_options]:this.simulation_options.default?this.simulation_options.default:{}:e.simulation_options),n=this.utils.deepMerge(this.simulation_options.default,r),n=this.utils.deepCopy(n),n=this.replaceFunctionsWithValues(n,null),i=!1===(null==n?void 0:n.simulate)?e.type.trial(this.DOM_target,e,t):e.type.simulate(e,(null==n?void 0:n.mode)||this.simulation_mode,n,t)):i=e.type.trial(this.DOM_target,e,t));i&&"function"==typeof i.then||this.simulation_mode&&(!this.simulation_mode||!1!==(null==n?void 0:n.simulate))||t(),this.internal.call_immediate=!1}evaluateTimelineVariables(e){for(const t of Object.keys(e))"object"==typeof e[t]&&null!==e[t]&&void 0!==e[t].timelineVariablePlaceholder&&(e[t]=e[t].timelineVariableFunction()),"object"==typeof e[t]&&null!==e[t]&&"timeline"!==t&&"timeline_variables"!==t&&this.evaluateTimelineVariables(e[t])}evaluateFunctionParameters(t){this.internal.call_immediate=!0;for(const i of Object.keys(t))"type"!==i&&(void 0!==Y[i]&&Y[i].type!==e.ParameterType.FUNCTION&&(t[i]=this.replaceFunctionsWithValues(t[i],null)),void 0!==t.type.info.parameters[i]&&t.type.info.parameters[i].type!==e.ParameterType.FUNCTION&&(t[i]=this.replaceFunctionsWithValues(t[i],t.type.info.parameters[i])));this.internal.call_immediate=!1}replaceFunctionsWithValues(t,i){if(null===t)return t;if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=this.replaceFunctionsWithValues(t[e],i);else if("object"==typeof t)if(null!==i&&i.nested)for(const r of Object.keys(t))"object"==typeof i.nested[r]&&i.nested[r].type!==e.ParameterType.FUNCTION&&(t[r]=this.replaceFunctionsWithValues(t[r],i.nested[r]));else for(const e of Object.keys(t))"type"!==e&&"timeline"!==e&&"timeline_variables"!==e&&(t[e]=this.replaceFunctionsWithValues(t[e],null));else if("function"==typeof t)return t();return t}setDefaultValues(t){for(const i in t.type.info.parameters)t.type.info.parameters[i].type===e.ParameterType.COMPLEX?(void 0===t[i]&&t.type.info.parameters[i].default&&(t[i]=t.type.info.parameters[i].default),!0===t.type.info.parameters[i].array&&Array.isArray(t[i])&&t[i].forEach(function(e,r){for(const e in t.type.info.parameters[i].nested)void 0!==t[i][r][e]&&null!==t[i][r][e]||void 0===t.type.info.parameters[i].nested[e].default||(t[i][r][e]=t.type.info.parameters[i].nested[e].default)})):void 0!==t[i]&&null!==t[i]||void 0===t.type.info.parameters[i].default||(t[i]=t.type.info.parameters[i].default)}checkExclusions(e){return t(this,void 0,void 0,function*(){if(e.min_width||e.min_height||e.audio,e.min_width||e.min_height){const t=e.min_width||0,i=e.min_height||0;if(window.innerWidth<t||window.innerHeight<i){for(this.getDisplayElement().innerHTML="<p>Your browser window is too small to complete this experiment. Please maximize the size of your browser window. If your browser window is already maximized, you will not be able to complete this experiment.</p><p>The minimum width is "+t+"px. Your current width is "+window.innerWidth+"px.</p><p>The minimum height is "+i+"px. Your current height is "+window.innerHeight+"px.</p>";window.innerWidth<t||window.innerHeight<i;)yield L(100);this.getDisplayElement().innerHTML=""}}if(void 0!==e.audio&&e.audio&&!window.hasOwnProperty("AudioContext")&&!window.hasOwnProperty("webkitAudioContext"))throw this.getDisplayElement().innerHTML="<p>Your browser does not support the WebAudio API, which means that you will not be able to complete the experiment.</p><p>Browsers that support the WebAudio API include Chrome, Firefox, Safari, and Edge.</p>",new Error})}drawProgressBar(e){document.querySelector(".jspsych-display-element").insertAdjacentHTML("afterbegin",'<div id="jspsych-progressbar-container"><span>'+e+'</span><div id="jspsych-progressbar-outer"><div id="jspsych-progressbar-inner"></div></div></div>')}updateProgressBar(){this.setProgressBar(this.getProgress().percent_complete/100)}setProgressBar(e){e=Math.max(Math.min(1,e),0),document.querySelector("#jspsych-progressbar-inner").style.width=100*e+"%",this.progress_bar_amount=e}getProgressBarCompleted(){return this.progress_bar_amount}}return"undefined"!=typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext),e.JsPsych=Te,e.initJsPsych=M,e.universalPluginParameters=Y,e}({}),initJsPsych=jsPsychModule.initJsPsych;