var jsPsychSurveyHtmlForm=function(e){"use strict";const t={name:"survey-html-form",parameters:{html:{type:e.ParameterType.HTML_STRING,pretty_name:"HTML",default:null},preamble:{type:e.ParameterType.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:e.ParameterType.STRING,pretty_name:"Button label",default:"Continue"},autofocus:{type:e.ParameterType.STRING,pretty_name:"Element ID to focus",default:""},dataAsArray:{type:e.ParameterType.BOOL,pretty_name:"Data As Array",default:!1},autocomplete:{type:e.ParameterType.BOOL,pretty_name:"Allow autocomplete",default:!1}}};class r{constructor(e){this.jsPsych=e}trial(e,t){
/**
           * Serialize all form data into an array
           * @copyright (c) 2018 Chris Ferdinandi, MIT License, https://gomakethings.com
           * @param  {Node}   form The form to serialize
           * @return {String}      The serialized form data
           */
function r(e){for(var t=[],r=0;r<e.elements.length;r++){var a=e.elements[r];if(a.name&&!a.disabled&&"file"!==a.type&&"reset"!==a.type&&"submit"!==a.type&&"button"!==a.type)if("select-multiple"===a.type)for(var l=0;l<a.options.length;l++)a.options[l].selected&&t.push({name:a.name,value:a.options[l].value});else("checkbox"!==a.type&&"radio"!==a.type||a.checked)&&t.push({name:a.name,value:a.value})}return t}function a(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=e[r].value;return t}var l="";if(null!==t.preamble&&(l+='<div id="jspsych-survey-html-form-preamble" class="jspsych-survey-html-form-preamble">'+t.preamble+"</div>"),t.autocomplete?l+='<form id="jspsych-survey-html-form">':l+='<form id="jspsych-survey-html-form" autocomplete="off">',l+=t.html,l+='<input type="submit" id="jspsych-survey-html-form-next" class="jspsych-btn jspsych-survey-html-form" value="'+t.button_label+'"></input>',l+="</form>",e.innerHTML=l,""!==t.autofocus){var s=e.querySelectorAll("#"+t.autofocus);0===s.length||s.length>1||s[0].focus()}e.querySelector("#jspsych-survey-html-form").addEventListener("submit",l=>{l.preventDefault();var s=performance.now(),m=Math.round(s-o),u=r(e.querySelector("#jspsych-survey-html-form"));t.dataAsArray||(u=a(u));var n={rt:m,response:u};e.innerHTML="",this.jsPsych.finishTrial(n)});var o=performance.now()}}return r.info=t,r}(jsPsychModule);