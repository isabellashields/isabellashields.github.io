var jsPsychSurveyLikert=function(e){"use strict";const t={name:"survey-likert",parameters:{questions:{type:e.ParameterType.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:e.ParameterType.HTML_STRING,pretty_name:"Prompt",default:void 0},labels:{type:e.ParameterType.STRING,array:!0,pretty_name:"Labels",default:void 0},required:{type:e.ParameterType.BOOL,pretty_name:"Required",default:!1},name:{type:e.ParameterType.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:e.ParameterType.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:e.ParameterType.HTML_STRING,pretty_name:"Preamble",default:null},scale_width:{type:e.ParameterType.INT,pretty_name:"Scale width",default:null},button_label:{type:e.ParameterType.STRING,pretty_name:"Button label",default:"Continue"},autocomplete:{type:e.ParameterType.BOOL,pretty_name:"Allow autocomplete",default:!1}}};class s{constructor(e){this.jsPsych=e}trial(e,t){if(null!==t.scale_width)var s=t.scale_width+"px";else s="100%";var r="";r+='<style id="jspsych-survey-likert-css">',r+=".jspsych-survey-likert-statement { display:block; font-size: 16px; padding-top: 40px; margin-bottom:10px; }.jspsych-survey-likert-opts { list-style:none; width:"+s+"; margin:auto; padding:0 0 35px; display:block; font-size: 14px; line-height:1.1em; }.jspsych-survey-likert-opt-label { line-height: 1.1em; color: #444; }.jspsych-survey-likert-opts:before { content: ''; position:relative; top:11px; /*left:9.5%;*/ display:block; background-color:#efefef; height:4px; width:100%; }.jspsych-survey-likert-opts:last-of-type { border-bottom: 0; }.jspsych-survey-likert-opts li { display:inline-block; /*width:19%;*/ text-align:center; vertical-align: top; }.jspsych-survey-likert-opts li input[type=radio] { display:block; position:relative; top:0; left:50%; margin-left:-6px; }",r+="</style>",null!==t.preamble&&(r+='<div id="jspsych-survey-likert-preamble" class="jspsych-survey-likert-preamble">'+t.preamble+"</div>"),t.autocomplete?r+='<form id="jspsych-survey-likert-form">':r+='<form id="jspsych-survey-likert-form" autocomplete="off">';for(var a=[],l=0;l<t.questions.length;l++)a.push(l);t.randomize_question_order&&(a=this.jsPsych.randomization.shuffle(a));for(l=0;l<t.questions.length;l++){var i=t.questions[a[l]];r+='<label class="jspsych-survey-likert-statement">'+i.prompt+"</label>";for(var n=100/i.labels.length,o='<ul class="jspsych-survey-likert-opts" data-name="'+i.name+'" data-radio-group="Q'+a[l]+'">',p=0;p<i.labels.length;p++)o+='<li style="width:'+n+'%"><label class="jspsych-survey-likert-opt-label"><input type="radio" name="Q'+a[l]+'" value="'+p+'"',i.required&&(o+=" required"),o+=">"+i.labels[p]+"</label></li>";r+=o+="</ul>"}r+='<input type="submit" id="jspsych-survey-likert-next" class="jspsych-survey-likert jspsych-btn" value="'+t.button_label+'"></input>',r+="</form>",e.innerHTML=r,e.querySelector("#jspsych-survey-likert-form").addEventListener("submit",t=>{t.preventDefault();for(var s=performance.now(),r=Math.round(s-u),l={},i=e.querySelectorAll("#jspsych-survey-likert-form .jspsych-survey-likert-opts"),n=0;n<i.length;n++){var o=i[n].dataset.radioGroup,p=e.querySelector('input[name="'+o+'"]:checked');if(null===p)var y="";else y=parseInt(p.value);var c={};if(""!==i[n].attributes["data-name"].value)var m=i[n].attributes["data-name"].value;else m=o;c[m]=y,Object.assign(l,c)}var h={rt:r,response:l,question_order:a};e.innerHTML="",this.jsPsych.finishTrial(h)});var u=performance.now()}simulate(e,t,s,r){"data-only"==t&&(r(),this.simulate_data_only(e,s)),"visual"==t&&this.simulate_visual(e,s,r)}create_simulation_data(e,t){const s={};let r=1e3;for(const t of e.questions){s[t.name?t.name:`Q${e.questions.indexOf(t)}`]=this.jsPsych.randomization.randomInt(0,t.labels.length-1),r+=this.jsPsych.randomization.sampleExGaussian(1500,400,.005,!0)}const a={response:s,rt:r,question_order:e.randomize_question_order?this.jsPsych.randomization.shuffle([...Array(e.questions.length).keys()]):[...Array(e.questions.length).keys()]},l=this.jsPsych.pluginAPI.mergeSimulationData(a,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,l),l}simulate_data_only(e,t){const s=this.create_simulation_data(e,t);this.jsPsych.finishTrial(s)}simulate_visual(e,t,s){const r=this.create_simulation_data(e,t),a=this.jsPsych.getDisplayElement();this.trial(a,e),s();const l=Object.entries(r.response);for(let e=0;e<l.length;e++)this.jsPsych.pluginAPI.clickTarget(a.querySelector(`input[type="radio"][name="${l[e][0]}"][value="${l[e][1]}"]`),(r.rt-1e3)/l.length*(e+1));this.jsPsych.pluginAPI.clickTarget(a.querySelector("#jspsych-survey-likert-next"),r.rt)}}return s.info=t,s}(jsPsychModule);